{"ast":null,"code":"var _jsxFileName = \"D:\\\\TMA-React\\\\demoTest\\\\Demo\\\\client\\\\src\\\\contexts\\\\Context.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { createContext, useState, useEffect } from 'react';\nimport NotFound from '../components/home/NotFound';\nimport toast, { Toaster } from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Context = /*#__PURE__*/createContext();\nexport const DataProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState([]);\n  const [categories, setCategory] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [dataSearch, setDataSearch] = useState([]);\n  const [inputSearch, setInputSearch] = useState('');\n  useEffect(() => {\n    const ListProduct = async () => {\n      await axios(\"http://localhost:8080\").then(result => {\n        setProducts(result.data);\n      }, error => {\n        console.log(error);\n      });\n    };\n\n    ListProduct();\n\n    const ListCategory = async () => {\n      await axios('http://localhost:8080/category').then(result => {\n        setCategory(result.data);\n      }, err => {\n        console.log(err);\n      });\n    };\n\n    ListCategory();\n    const dataCart = JSON.parse(localStorage.getItem('dataCart'));\n\n    if (dataCart !== null) {\n      setCart(dataCart);\n    }\n\n    const dataTotal = JSON.parse(localStorage.getItem('dataTotal'));\n\n    if (dataTotal !== null) {\n      setTotal(dataTotal);\n    }\n  }, []);\n\n  const addCart = id => {\n    toast.success('Thêm thành công!');\n    const check = cart.every(item => {\n      return item.id !== id;\n    });\n\n    if (check) {\n      const data = products.filter(product => {\n        return product.id === id;\n      });\n      setCart([...cart, ...data]);\n    } else {\n      increase(id);\n    }\n  };\n\n  const reduction = id => {\n    cart.forEach(item => {\n      if (item.id === id) {\n        // if(item.quantity <= 1) {\n        //     removeProduct(id)\n        // }else {\n        //     item.quantity -= 1\n        // }\n        item.quantity <= 1 ? removeProduct(id) : item.quantity -= 1;\n      }\n    });\n    setCart(cart);\n    getTotal();\n  };\n\n  const increase = id => {\n    cart.forEach(item => {\n      if (item.id === id) {\n        item.quantity += 1;\n      }\n    });\n    setCart(cart);\n    getTotal();\n  };\n\n  const removeProduct = id => {\n    if (window.confirm('Are you sure you want to remove Product?')) {\n      cart.forEach((item, index) => {\n        if (item.id === id) {\n          cart.splice(index, 1);\n        }\n      });\n      setCart(cart);\n      getTotal();\n\n      if (cart.length === 0) {\n        window.location.reload();\n        CartEmpty();\n      }\n    }\n  };\n\n  const CartEmpty = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(NotFound, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  };\n\n  const getTotal = () => {\n    const res = cart.reduce((prev, item) => {\n      return prev + item.quantity * item.price;\n    }, 0);\n    setTotal(res);\n  };\n\n  useEffect(() => {\n    localStorage.setItem('dataCart', JSON.stringify(cart));\n    localStorage.setItem('dataTotal', JSON.stringify(total));\n  });\n\n  const requestSearch = e => {\n    const inputSearch = e.target.value.toLowerCase();\n    setInputSearch(inputSearch);\n    const filterSearch = products.filter(dataSearch => {\n      return dataSearch.name.toLowerCase().includes(inputSearch.toLowerCase());\n    });\n    setDataSearch(filterSearch);\n    console.log(inputSearch);\n    console.log(dataSearch);\n  };\n\n  const cancelSearch = () => {\n    setInputSearch('');\n    requestSearch(inputSearch);\n  };\n\n  const value = {\n    products,\n    categories,\n    addCart,\n    cart,\n    reduction,\n    increase,\n    removeProduct,\n    total,\n    getTotal,\n    requestSearch,\n    inputSearch,\n    dataSearch,\n    cancelSearch,\n    CartEmpty\n  };\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: value,\n    children: [\" \", children, \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 9\n  }, this);\n};\n\n_s(DataProvider, \"RcSDRcdmeTdzkI69n4hwicyyuJQ=\");\n\n_c = DataProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataProvider\");","map":{"version":3,"names":["axios","React","createContext","useState","useEffect","NotFound","toast","Toaster","Context","DataProvider","children","products","setProducts","cart","setCart","categories","setCategory","total","setTotal","dataSearch","setDataSearch","inputSearch","setInputSearch","ListProduct","then","result","data","error","console","log","ListCategory","err","dataCart","JSON","parse","localStorage","getItem","dataTotal","addCart","id","success","check","every","item","filter","product","increase","reduction","forEach","quantity","removeProduct","getTotal","window","confirm","index","splice","length","location","reload","CartEmpty","res","reduce","prev","price","setItem","stringify","requestSearch","e","target","value","toLowerCase","filterSearch","name","includes","cancelSearch"],"sources":["D:/TMA-React/demoTest/Demo/client/src/contexts/Context.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { createContext, useState, useEffect } from 'react'\r\nimport NotFound from '../components/home/NotFound';\r\nimport toast, { Toaster } from 'react-hot-toast';\r\n\r\nexport const Context = createContext();\r\n\r\nexport const DataProvider = ({ children }) => {\r\n    const [products, setProducts] = useState([]);\r\n    const [cart, setCart] = useState([]);\r\n    const [categories, setCategory] = useState([]);\r\n    const [total, setTotal] = useState(0);\r\n    const [dataSearch, setDataSearch] = useState([]);\r\n    const [inputSearch, setInputSearch] = useState('')\r\n\r\n    useEffect(() => {\r\n        const ListProduct = async () => {\r\n            await axios(\"http://localhost:8080\")\r\n                .then(result => {\r\n                    setProducts(result.data);\r\n                },\r\n                    (error) => {\r\n                        console.log(error);\r\n                    }\r\n                )\r\n        }\r\n        ListProduct()\r\n\r\n        const ListCategory = async () => {\r\n            await axios('http://localhost:8080/category')\r\n                .then(result => {\r\n                    setCategory(result.data);\r\n                },\r\n                    (err) => {\r\n                        console.log(err);\r\n                    })\r\n        };\r\n        ListCategory();\r\n\r\n        const dataCart = JSON.parse(localStorage.getItem('dataCart'));\r\n        if (dataCart !== null) {\r\n            setCart(dataCart);\r\n        }\r\n        const dataTotal = JSON.parse(localStorage.getItem('dataTotal'));\r\n        if (dataTotal !== null) {\r\n            setTotal(dataTotal);\r\n        }\r\n    }, [])\r\n\r\n    const addCart = (id) => {\r\n        toast.success('Thêm thành công!')\r\n        const check = cart.every(item => {\r\n            return item.id !== id;\r\n        })\r\n        if (check) {\r\n            const data = products.filter(product => {\r\n                return product.id === id;\r\n            })\r\n            setCart([...cart, ...data])\r\n        } else {\r\n            increase(id)\r\n        }\r\n    }\r\n\r\n    const reduction = id => {\r\n        cart.forEach(item => {\r\n            if (item.id === id) {\r\n                // if(item.quantity <= 1) {\r\n                //     removeProduct(id)\r\n                // }else {\r\n                //     item.quantity -= 1\r\n                // }\r\n                item.quantity <= 1 ? removeProduct(id) : item.quantity -= 1;\r\n\r\n            }\r\n        })\r\n        setCart(cart)\r\n        getTotal()\r\n    }\r\n\r\n    const increase = id => {\r\n        cart.forEach(item => {\r\n            if (item.id === id) {\r\n                item.quantity += 1;\r\n            }\r\n        })\r\n\r\n        setCart(cart)\r\n        getTotal()\r\n    }\r\n\r\n    const removeProduct = id => {\r\n        if (window.confirm('Are you sure you want to remove Product?')) {\r\n            cart.forEach((item, index) => {\r\n                if (item.id === id) {\r\n                    cart.splice(index, 1);\r\n                }\r\n            })\r\n            setCart(cart)\r\n            getTotal()\r\n            if (cart.length === 0) {\r\n                window.location.reload();\r\n                CartEmpty()\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    const CartEmpty = () => {\r\n        return (\r\n            <>\r\n                <NotFound />\r\n            </>\r\n        )\r\n    }\r\n\r\n\r\n    const getTotal = () => {\r\n        const res = cart.reduce((prev, item) => {\r\n            return prev + (item.quantity * item.price);\r\n        }, 0)\r\n        setTotal(res)\r\n    }\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('dataCart', JSON.stringify(cart));\r\n        localStorage.setItem('dataTotal', JSON.stringify(total));\r\n    })\r\n\r\n    const requestSearch = (e) => {\r\n        const inputSearch = e.target.value.toLowerCase();\r\n        setInputSearch(inputSearch)\r\n\r\n        const filterSearch = products.filter((dataSearch) => {\r\n            return dataSearch.name.toLowerCase().includes(inputSearch.toLowerCase());\r\n        });\r\n        setDataSearch(filterSearch);\r\n        console.log(inputSearch)\r\n        console.log(dataSearch)\r\n    };\r\n\r\n    const cancelSearch = () => {\r\n        setInputSearch('')\r\n        requestSearch(inputSearch)\r\n    }\r\n\r\n    const value = {\r\n        products, categories, addCart, cart,\r\n        reduction, increase, removeProduct, total, getTotal,\r\n        requestSearch, inputSearch, dataSearch, cancelSearch, CartEmpty\r\n    };\r\n\r\n    return (\r\n        <Context.Provider value={value}> {children} </Context.Provider>\r\n    )\r\n\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}