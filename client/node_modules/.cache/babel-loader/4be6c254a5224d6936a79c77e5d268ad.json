{"ast":null,"code":"var _jsxFileName = \"D:\\\\TMA-React\\\\demoTest\\\\Demo\\\\client\\\\src\\\\contexts\\\\Context.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Context = /*#__PURE__*/createContext();\nexport const DataProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState([]);\n  const [total, setTotal] = useState(0);\n  useEffect(() => {\n    const fetchData = async () => {\n      await axios(\"http://localhost:8080\").then(result => {\n        console.log(result);\n        setProducts(result.products);\n        localStorage.setItem('dataCart', JSON.stringify(cart));\n      }, error => {\n        console.log(error);\n      });\n    };\n\n    fetchData();\n  }, []);\n\n  const addCart = id => {\n    const check = cart.every(item => {\n      return item.id === id;\n    });\n\n    if (check) {\n      const data = products.filter(product => {\n        return product.id === id;\n      });\n      setCart([...cart, ...data]);\n    } else {\n      alert('Please select a product from the list');\n    }\n  };\n\n  const reduction = id => {\n    cart.forEach(item => {\n      if (item.id === id) {\n        item.count === 1 ? item.count = 1 : item.count -= 1;\n      }\n    });\n    setCart(cart);\n    getTotal();\n  };\n\n  const increase = id => {\n    cart.forEach(item => {\n      if (item.id === id) {\n        item.count += 1;\n      }\n    });\n    setCart(cart);\n    getTotal();\n  };\n\n  const removeProduct = id => {\n    if (window.confirm('Are you sure you want to remove Product?')) {\n      cart.forEach((item, index) => {\n        if (item.id === id) {\n          cart.splice(index, 1);\n        }\n      });\n      setCart(cart);\n      getTotal();\n    }\n  };\n\n  const getTotal = () => {\n    const res = cart.reduce((prev, item) => {\n      return prev + item.count * item.price;\n    }, 0);\n    setTotal(res);\n  };\n\n  useEffect(() => {\n    localStorage.setItem('dataCart', JSON.stringify(cart));\n    const dataCart = JSON.parse(localStorage.getItem('dataCart'));\n\n    if (dataCart !== null) {\n      setCart(dataCart);\n    }\n\n    localStorage.setItem('dataTotal', JSON.stringify(total));\n    const dataTotal = JSON.parse(localStorage.getItem('dataTotal'));\n\n    if (dataTotal !== null) {\n      setTotal(dataTotal);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: {\n      products,\n      addCart,\n      cart,\n      reduction,\n      increase,\n      removeProduct,\n      total,\n      getTotal\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 9\n  }, this);\n};\n\n_s(DataProvider, \"UzuXpJnhuiZFeQwfyYuvdced2QQ=\");\n\n_c = DataProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataProvider\");","map":{"version":3,"names":["axios","React","createContext","useState","useEffect","useContext","Context","DataProvider","children","products","setProducts","cart","setCart","total","setTotal","fetchData","then","result","console","log","localStorage","setItem","JSON","stringify","error","addCart","id","check","every","item","data","filter","product","alert","reduction","forEach","count","getTotal","increase","removeProduct","window","confirm","index","splice","res","reduce","prev","price","dataCart","parse","getItem","dataTotal"],"sources":["D:/TMA-React/demoTest/Demo/client/src/contexts/Context.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { createContext, useState, useEffect, useContext } from 'react'\r\n\r\nexport const Context = createContext();\r\n\r\nexport const DataProvider = ({children}) => {\r\n    const [products, setProducts] = useState([]);\r\n    const [cart, setCart] = useState([]);\r\n    const [total, setTotal] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            await axios(\"http://localhost:8080\")\r\n                .then(result => {\r\n                    console.log(result);\r\n                    setProducts(result.products);\r\n                    localStorage.setItem('dataCart', JSON.stringify(cart));\r\n                },\r\n                    (error) => {\r\n                        console.log(error);\r\n                    }\r\n                )\r\n        };\r\n        fetchData();\r\n    }, [])\r\n\r\n    const addCart = (id) => {\r\n\r\n        const check = cart.every(item => {\r\n            return item.id === id;\r\n        })\r\n        if (check) {\r\n            const data = products.filter(product => {\r\n                return product.id === id;\r\n            })\r\n            setCart([...cart, ...data])\r\n        } else {\r\n            alert('Please select a product from the list');\r\n        }\r\n    }\r\n\r\n    const reduction = id => {\r\n        cart.forEach(item => {\r\n            if (item.id === id) {\r\n                item.count === 1 ? item.count = 1 : item.count -= 1;\r\n            }\r\n        })\r\n        setCart(cart)\r\n        getTotal()\r\n    }\r\n\r\n    const increase = id => {\r\n        cart.forEach(item => {\r\n            if (item.id === id) {\r\n                item.count += 1;\r\n            }\r\n        })\r\n        setCart(cart)\r\n        getTotal()\r\n    }\r\n\r\n    const removeProduct = id => {\r\n        if (window.confirm('Are you sure you want to remove Product?')) {\r\n            cart.forEach((item, index) => {\r\n                if (item.id === id) {\r\n                    cart.splice(index, 1);\r\n                }\r\n            })\r\n            setCart(cart)\r\n            getTotal()\r\n        }\r\n    }\r\n\r\n    const getTotal = () => {\r\n        const res = cart.reduce((prev, item) => {\r\n            return prev + (item.count * item.price);\r\n        }, 0)\r\n        setTotal(res)\r\n    }\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('dataCart', JSON.stringify(cart));\r\n        const dataCart = JSON.parse(localStorage.getItem('dataCart'));\r\n        if (dataCart !== null) {\r\n            setCart(dataCart);\r\n        }\r\n        localStorage.setItem('dataTotal', JSON.stringify(total));\r\n        const dataTotal = JSON.parse(localStorage.getItem('dataTotal'));\r\n        if (dataTotal !== null) {\r\n            setTotal(dataTotal);\r\n        }\r\n    })\r\n\r\n\r\n    return (\r\n        <Context.Provider\r\n            value={{ products, addCart, cart, reduction, increase, removeProduct, total, getTotal }}>\r\n            {children}\r\n        </Context.Provider>\r\n    )\r\n\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}